@model IEnumerable<EnlightEnglishCenter.Models.LopHoc>
@{
    ViewData["Title"] = "Lịch khai giảng tháng này";
}

<div class="container py-5">
    <h2 class="fw-bold text-primary text-center mb-4">
        <i class="fa-solid fa-calendar-days me-2"></i>Lịch khai giảng tháng này
    </h2>

    <table class="table table-bordered text-center align-middle shadow-sm">
        <thead class="table-primary">
            <tr>
                <th>Tên khóa học</th>
                <th>Trình độ</th>
                <th>Ngày khai giảng</th>
                <th>Thời lượng</th>
                <th>Giảng viên</th>
                <th>Trạng thái lớp</th>
                <th>Đăng ký</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var lop in Model)
            {
                <tr>
                    <td>@(lop.MaKhoaHocNavigation?.TenKhoaHoc ?? "—")</td>
                    <td>@(lop.MaKhoaHocNavigation?.CapDo ?? "—")</td>
                    <td>@(lop.MaKhoaHocNavigation?.NgayBatDau?.ToString("dd/MM/yyyy") ?? "—")</td>
                    <td>@(lop.MaKhoaHocNavigation?.ThoiLuong ?? "—")</td>
                    <td>@(lop.MaGiaoVienNavigation?.NguoiDung?.HoTen ?? "Chưa phân công")</td>
                    <td>
                        @if (lop.TrangThai == "Đang mở")
                        {
                            <span class="badge bg-success">Đang mở</span>
                        }
                        else if (lop.TrangThai == "Đang học")
                        {
                            <span class="badge bg-warning text-dark">Đang học</span>
                        }
                        else
                        {
                            <span class="badge bg-secondary">@((lop.TrangThai ?? "Chưa xác định"))</span>
                        }
                    </td>
                    <td>
                        <a asp-controller="TestDauVao"
                           asp-action="DangKy"
                           asp-route-maKhoaHoc="@(lop.MaKhoaHoc ?? 0)"
                           class="btn btn-outline-primary btn-sm">
                            <i class="fa-solid fa-pen-to-square me-1"></i>Đăng ký Test
                        </a>
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>
