@model EnlightEnglishCenter.Models.KhoaHoc
@{
    ViewData["Title"] = "Sửa khóa học";
}

<div class="container mt-4">
    <h3 class="fw-bold text-primary mb-4">
        <i class="fa-solid fa-pen-to-square me-2"></i> Sửa khóa học
    </h3>

    <form asp-action="SuaKhoaHoc" method="post" class="card shadow-sm p-4">
        @Html.AntiForgeryToken()
        <input type="hidden" asp-for="MaKhoaHoc" />

        <!-- Tên khóa học -->
        <div class="mb-3">
            <label class="form-label fw-semibold">Tên khóa học</label>
            <input asp-for="TenKhoaHoc" class="form-control" required />
            <span asp-validation-for="TenKhoaHoc" class="text-danger"></span>
        </div>

        <!-- Thông tin chính -->
        <div class="row g-3">
            <div class="col-md-4">
                <label class="form-label fw-semibold">Cấp độ</label>
                <select asp-for="CapDo" class="form-select">
                    <option value="Cơ bản">Cơ bản</option>
                    <option value="Trung bình">Trung bình</option>
                    <option value="Nâng cao">Nâng cao</option>
                </select>
            </div>

            <div class="col-md-4">
                <label class="form-label fw-semibold">Học phí (VNĐ)</label>
                <input asp-for="HocPhi" type="number" class="form-control" step="100000" />
            </div>

            <div class="col-md-4">
                <label class="form-label fw-semibold">Thời lượng (tuần)</label>
                <input asp-for="ThoiLuongTuan" type="number" class="form-control" id="ThoiLuongTuan" />
            </div>
        </div>

        <!-- Ngày bắt đầu / kết thúc -->
        <div class="row g-3 mt-2">
            <div class="col-md-6">
                <label class="form-label fw-semibold">Ngày bắt đầu</label>
                <input asp-for="NgayBatDau" type="date" class="form-control" id="NgayBatDau" />
            </div>
            <div class="col-md-6">
                <label class="form-label fw-semibold">Ngày kết thúc</label>
                <input asp-for="NgayKetThuc" type="date" class="form-control" id="NgayKetThuc" />
            </div>
        </div>

        <!-- Lịch học -->
        <div class="mt-3">
            <label class="form-label fw-semibold">Lịch học mặc định</label>
            <select asp-for="LichHoc" class="form-select">
                <option value="">-- Chọn lịch học --</option>
                <option value="2,4,6">Thứ 2 - 4 - 6</option>
                <option value="3,5,7">Thứ 3 - 5 - 7</option>
            </select>
        </div>

        <!-- Mô tả -->
        <div class="mt-3">
            <label class="form-label fw-semibold">Mô tả</label>
            <textarea asp-for="MoTa" class="form-control" rows="3"></textarea>
        </div>

        <div class="mt-4 text-end">
            <button type="submit" class="btn btn-primary px-4">
                <i class="fa-solid fa-save me-2"></i>Lưu thay đổi
            </button>
            <a asp-action="KhoaHoc" class="btn btn-outline-secondary px-4">Hủy</a>
        </div>
    </form>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const batDau = document.getElementById("NgayBatDau");
            const ketThuc = document.getElementById("NgayKetThuc");
            const thoiLuong = document.getElementById("ThoiLuongTuan");

            function capNhatNgayKetThuc() {
                if (!batDau.value || !thoiLuong.value) return;
                const start = new Date(batDau.value);
                const end = new Date(start);
                end.setDate(start.getDate() + parseInt(thoiLuong.value) * 7);
                ketThuc.value = end.toISOString().split("T")[0];
            }

            batDau.addEventListener("change", capNhatNgayKetThuc);
            thoiLuong.addEventListener("input", capNhatNgayKetThuc);
        });
    </script>
}
